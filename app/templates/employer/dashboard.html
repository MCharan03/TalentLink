{% extends "base.html" %}

{% block title %}Employer Portal | SRA{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-main">Talent Search</h2>
        <span class="badge bg-primary">Beta Access</span>
    </div>

    <!-- Search Bar -->
    <div class="card border-glass p-4 mb-5 animate-up">
        <form method="GET" class="row g-3">
            <div class="col-md-10">
                <input type="text" name="q" class="form-control form-control-lg bg-surface text-main border-secondary" 
                       placeholder="Describe the perfect candidate (e.g., 'Python developer with ML experience and leadership skills')..." 
                       value="{{ query }}">
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-lg btn-primary w-100">Search</button>
            </div>
        </form>
    </div>

    {% if candidates %}
    <div class="row g-4">
        {% for candidate in candidates %}
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 border-glass hover-card animate-up" style="animation-delay: {{ loop.index * 100 }}ms;">
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div class="rounded-circle bg-primary bg-opacity-10 d-flex align-items-center justify-content-center me-3" style="width: 50px; height: 50px;">
                            <span class="fw-bold text-primary">{{ candidate.username[:2].upper() }}</span>
                        </div>
                        <div>
                            <h5 class="card-title mb-0">{{ candidate.username }}</h5>
                            <small class="text-muted">ID: #{{ candidate.id }}</small>
                        </div>
                        <div class="ms-auto text-end">
                            <span class="badge bg-success rounded-pill">{{ candidate.match_score }}% Match</span>
                        </div>
                    </div>
                    
                    <p class="card-text text-muted small mb-3">
                        <!-- Simulated tagline -->
                        Top skills: Python, Flask, AI...
                    </p>
                    
                    <a href="{{ url_for('employer.candidate_profile', user_id=candidate.id, job_context=query) }}" class="btn btn-outline-primary w-100">View "Scout's Note"</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% elif query %}
    <div class="text-center py-5">
        <span data-feather="search" class="text-muted mb-3" style="width: 48px; height: 48px;"></span>
        <h4 class="text-muted">No candidates found matching that description.</h4>
    </div>
    {% else %}
    <!-- Empty State / Dashboard Widgets -->
    <div class="row g-4">
        <div class="col-md-4">
            <div class="card bg-primary bg-opacity-10 border-0 p-4 text-center">
                <h3 class="fw-bold text-primary mb-1">12</h3>
                <small class="text-muted">Active Job Postings</small>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-success bg-opacity-10 border-0 p-4 text-center">
                <h3 class="fw-bold text-success mb-1">48</h3>
                <small class="text-muted">New Applications</small>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card bg-warning bg-opacity-10 border-0 p-4 text-center">
                <h3 class="fw-bold text-warning mb-1">5</h3>
                <small class="text-muted">Interviews Scheduled</small>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
